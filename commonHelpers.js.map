{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport function renderImages(images) {\n  const refs = {\n    imageList: document.querySelector(`.images-list`),\n  }\n\n  const markup = images.map((image) => {\n    return `<li class=\"images-list-item\">\n      <a class=\"img-link\" href=\"${image.largeImageURL}\">\n        <img class=\"img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <ul class=\"img-dscr\">\n        <li class=\"img-data\">\n          <p class=\"img-data-title\">Likes</p>\n          <p class=\"img-data-numbers\">${image.likes}</p>\n        </li>\n        <li class=\"img-data\">\n          <p class=\"img-data-title\">Views</p>\n          <p class=\"img-data-numbers\">${image.views}</p>\n        </li>\n        <li class=\"img-data\">\n          <p class=\"img-data-title\">Comments</p>\n          <p class=\"img-data-numbers\">${image.comments}</p>\n        </li>\n        <li class=\"img-data\">\n          <p class=\"img-data-title\">Downloads</p>\n          <p class=\"img-data-numbers\">${image.downloads}</p>\n        </li>\n      </ul>\n    </li>`;\n  }).join('');\n\n  refs.imageList.innerHTML += markup;\n}\n\nexport function clearGallery() {\n  const refs = {\n    imageList: document.querySelector(`.images-list`),\n  };\n  \n  refs.imageList.innerHTML = ``;\n}","\nimport axios from 'axios';\nconst API_KEY = '44528758-32c26e02cbc7bd56fd7d9b89c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n    const params = {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    };\n  \n  \n    \n  \n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n      } catch (error) {\n        throw new Error('Fetch request failed');\n      }\n    }","'use strict';\n\n// import './css/styles.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\n import \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { renderImages, clearGallery } from \"./js/render-functions.js\";\nimport { fetchImages } from \"./js/pixabay-api.js\";\n\nconst refs = {\n    imageSearchForm: document.querySelector('.search-form'),\n    imageSearchInput: document.querySelector('.search-input'),\n    submitButton: document.querySelector('.search-btn'),\n    imageList: document.querySelector('.images-list'),\n    loadMoreButton: document.querySelector('.load-more'),\n\n    loader: document.getElementById('loader'), }\n\n// refs.loader.classList.add('hidden');\nrefs.loadMoreButton.classList.add('hidden');\n\nlet lightbox;\nlet request = \"\";\nlet page = 1;\nlet totalHits = 0; \n\n\nrefs.imageSearchForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    request = refs.imageSearchInput.value.trim();\n\n    if (request === '') {\n        refs.imageList.innerHTML = '';\n        return iziToast.info({\n            message: 'You need to enter a search request!',\n            position: 'topRight',\n            transitionIn: 'bounceInDown',\n            transitionOut: 'fadeOutDown',\n        });\n    }\n\n    refs.loader.classList.remove('hidden');\n    refs.loadMoreButton.classList.add('hidden');\n\n    clearGallery();\n    page = 1;\n\n    try {\n        const { data } = await fetchImages(request, page);\n        const { hits, total } = data;\n\n         totalHits = total; \n        if (hits.length === 0) {\n            refs.imageList.innerHTML = '';\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                transitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n            });\n        } else {\n            renderImages(hits);\n\n            if (lightbox) {\n                lightbox.refresh();\n            } else {\n                lightbox = new SimpleLightbox('.images-list-item a', {\n                    captions: true,\n                    captionSelector: 'img',\n                    captionType: 'attr',\n                    captionsData: 'alt',\n                    captionPosition: 'bottom',\n                    captionDelay: 250,\n                    animationSpeed: 300,\n                    widthRatio: 1,\n                    heightRatio: 0.95,\n                    disableRightClick: true,\n                });\n            }\n             refs.loadMoreButton.classList.add('hidden');\n        }\n        refs.loader.classList.add('hidden');\n\n        // Check if end of collection is reached\n        if (page * 15 >= totalHits) {\n            refs.loadMoreButton.classList.add('hidden');\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                transitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n            });\n        } else {\n            refs.loadMoreButton.classList.remove('hidden');\n        }\n    } catch (err) {\n        iziToast.error({\n            message: 'Something went wrong. Please try again later!',\n            position: 'topRight',\n            transitionIn: 'bounceInDown',\n            transitionOut: 'fadeOutDown',\n        });\n    } finally {\n        refs.loader.classList.add('hidden');\n        e.target.reset();\n    }\n});\n\nrefs.loadMoreButton.addEventListener('click', async () => {\n    page += 1;\n    refs.loadMoreButton.textContent = \"Loading images, please wait...\";\n    refs.loader.classList.remove('hidden');\n    refs.loadMoreButton.classList.add('hidden');\n\n    try {\n        const { data } = await fetchImages(request);\n        const { hits, total } = data;\n        totalHits = total;\n        if (hits.length === 0) {\n            refs.imageList.innerHTML = '';\n            iziToast.error({\n                message: 'Something went wrong. Please try again later!',\n                position: 'topRight',\n                transitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n        });\n\n        }\n        else {renderImages(hits);\n        if (lightbox) {\n             lightbox.refresh();\n        }\n        else {\n            lightbox = new SimpleLightbox('.images-list-item a ', {\n                aptions: true,\n                    captionSelector: 'img',\n                    captionType: 'attr',\n                    captionsData: 'alt',\n                    captionPosition: 'bottom',\n                    captionDelay: 250,\n                    animationSpeed: 300,\n                    widthRatio: 1,\n                    heightRatio: 0.95,\n                    disableRightClick: true,\n                });\n            }\n       refs.loader.classList.add('hidden');\n\n        // Check if end of collection is reached\n        if (page * 15 >= totalHits) {\n            refs.loadMoreButton.classList.add('hidden');\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n\ntransitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n            });\n        } else {\n            refs.loadMoreButton.classList.remove('hidden');\n            \n         }} }\n     catch (err) {\n        iziToast.error({\n            message: 'Something went wrong. Please try again later!',\n            position: 'topRight',\n            transitionIn: 'bounceInDown',\n            transitionOut: 'fadeOutDown',\n        });\n    } finally {\n        refs.loader.classList.add('hidden');\n        refs.loadMoreButton.textContent = \"Load more\";\n    }\n});"],"names":["renderImages","images","refs","markup","image","clearGallery","API_KEY","BASE_URL","fetchImages","query","page","params","axios","lightbox","request","totalHits","e","iziToast","data","hits","total","SimpleLightbox"],"mappings":"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"}