{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport function renderImages(images) {\n  const refs = {\n    imageList: document.querySelector(`.images-list`),\n  }\n\n  const markup = images.map((image) => {\n    return `<li class=\"images-list-item\">\n      <a class=\"img-link\" href=\"${image.largeImageURL}\">\n        <img class=\"img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <ul class=\"img-dscr\">\n        <li class=\"img-data\">\n          <p class=\"img-data-title\">Likes</p>\n          <p class=\"img-data-numbers\">${image.likes}</p>\n        </li>\n        <li class=\"img-data\">\n          <p class=\"img-data-title\">Views</p>\n          <p class=\"img-data-numbers\">${image.views}</p>\n        </li>\n        <li class=\"img-data\">\n          <p class=\"img-data-title\">Comments</p>\n          <p class=\"img-data-numbers\">${image.comments}</p>\n        </li>\n        <li class=\"img-data\">\n          <p class=\"img-data-title\">Downloads</p>\n          <p class=\"img-data-numbers\">${image.downloads}</p>\n        </li>\n      </ul>\n    </li>`;\n  }).join('');\n  return markup;\n\n  // refs.imageList.insertAdjacentHTML('be foreend', markup);\n}\n\n//export default function clearGallery() {\n  //const refs = {\n   // imageList: document.querySelector(`.images-list`),\n  //};\n  \n // refs.imageList.innerHTML = ``;\n//}","\nimport axios from 'axios';\nconst API_KEY = '44528758-32c26e02cbc7bd56fd7d9b89c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n    const params = {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    };\n  \n  \n    \n  \n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n      } catch (error) {\n        throw new Error('Fetch request failed');\n      }\n    }","'use strict';\n\n// import './css/styles.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\n import \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport  { renderImages } from \"./js/render-functions.js\";\nimport { fetchImages } from \"./js/pixabay-api.js\";\n\nconst refs = {\n    imageSearchForm: document.querySelector('.search-form'),\n    imageSearchInput: document.querySelector('.search-input'),\n    submitButton: document.querySelector('.search-btn'),\n    imageList: document.querySelector('.images-list'),\n    loadMoreButton: document.querySelector('.load-more'),\n\n    loader: document.getElementById('loader'), }\n\n// refs.loader.classList.add('hidden');\nrefs.loadMoreButton.classList.add('hidden');\n\nlet lightbox;\nlet request = \"\";\nlet page = 1;\nlet totalHits = 0; \nconst perPage = 15;\n\n\nrefs.imageSearchForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    request = refs.imageSearchInput.value.trim();\n\n    if (request === '') {\n        refs.imageList.innerHTML = '';\n        return iziToast.info({\n            message: 'You need to enter a search request!',\n            position: 'topRight',\n            transitionIn: 'bounceInDown',\n            transitionOut: 'fadeOutDown',\n        });\n    }\n\n    refs.loader.classList.remove('hidden');\n    refs.loadMoreButton.classList.add('hidden');\n\n    \n    page = 1;\n\n    try {\n        const data  = await fetchImages(request, page);\n        \n        const { hits, total } = data;\n\n         totalHits = total; \n        if (hits.length === 0) {\n            refs.imageList.innerHTML = '';\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                transitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n            });\n        } else {\n             refs.imageList.innerHTML = '';\n            // renderImages(hits);\n            const markup = renderImages(hits);\n            refs.imageList.insertAdjacentHTML('beforeend', markup);\n\n            if (lightbox) {\n                lightbox.refresh();\n            } else {\n                lightbox = new SimpleLightbox('.images-list-item a', {\n                    captions: true,\n                    captionSelector: 'img',\n                    captionType: 'attr',\n                    captionsData: 'alt',\n                    captionPosition: 'bottom',\n                    captionDelay: 250,\n                    animationSpeed: 300,\n                    widthRatio: 1,\n                    heightRatio: 0.95,\n                    disableRightClick: true,\n                });\n            }\n            //  refs.loadMoreButton.classList.add('hidden');\n        }\n        // refs.loader.classList.add('hidden');\n\n        // Check if end of collection is reached\n        if (page * perPage < totalHits) {\n            refs.loadMoreButton.classList.remove('hidden');}\n            else {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                transitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n            });\n        // } else {\n            // refs.loadMoreButton.classList.add('hidden');\n        }\n      } \n     catch (err) {\n        console.error('Error fetching images', err);\n       iziToast.error({\n            message: 'Something went wrong. Please try again later!',\n           position: 'topRight',\n            transitionIn: 'bounceInDown',\n          transitionOut: 'fadeOutDown',\n        });\n     }\n     finally {\n        refs.loader.classList.add('hidden');\n        e.target.reset();\n    }\n});\n\nrefs.loadMoreButton.addEventListener('click', async () => {\n    page += 1;\n    refs.loadMoreButton.textContent = \"Loading images, please wait...\";\n    refs.loader.classList.remove('hidden');\n    refs.loadMoreButton.classList.add('hidden');\n\n    try {\n        const  data  = await fetchImages(request, page);\n        \n        const { hits, total } = data;\n        totalHits = total;\n        if (hits.length === 0) {\n            refs.imageList.innerHTML = '';\n            iziToast.error({\n                message: 'Something went wrong. Please try again later!',\n                position: 'topRight',\n                transitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n        });\n\n        }\n        else {\n            const markup = renderImages(hits);\n            refs.imageList.insertAdjacentHTML('beforeend', markup);\n\n        if (lightbox) {\n             lightbox.refresh();\n        }\n        else {\n            lightbox = new SimpleLightbox('.images-list-item a ', {\n                captions: true,\n                    captionSelector: 'img',\n                    captionType: 'attr',\n                    captionsData: 'alt',\n                    captionPosition: 'bottom',\n                    captionDelay: 250,\n                    animationSpeed: 300,\n                    widthRatio: 1,\n                    heightRatio: 0.95,\n                    disableRightClick: true,\n                });\n            }\n    //    refs.loader.classList.add('hidden');\n\n        // Check if end of collection is reached\n        if (page * perPage < totalHits) {\n            refs.loadMoreButton.classList.remove('hidden');}\n            else {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n\ntransitionIn: 'bounceInDown',\n                transitionOut: 'fadeOutDown',\n            });\n        // } else {\n        //     refs.loadMoreButton.classList.remove('hidden');\n            \n         }} \n        refs.loader.classList.add('hidden'); }\n     catch (err) {\n        console.error('Error fetching images; , err')\n        iziToast.error({\n            message: 'Something went wrong. Please try again later!',\n            position: 'topRight',\n            transitionIn: 'bounceInDown',\n            transitionOut: 'fadeOutDown',\n        });\n    } finally {\n        refs.loader.classList.add('hidden');\n        refs.loadMoreButton.textContent = \"Load more\";\n    }\n});"],"names":["renderImages","images","image","API_KEY","BASE_URL","fetchImages","query","page","params","axios","refs","lightbox","request","totalHits","perPage","e","iziToast","data","hits","total","markup","SimpleLightbox","err"],"mappings":"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"}